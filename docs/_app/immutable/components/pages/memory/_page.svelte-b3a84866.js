import{S as G,i as K,s as A,k as v,q as P,a as q,l as y,m as b,r as Q,h as g,c as w,n as m,b as M,G as k,B as I,M as R,I as E,N as T,J as N,K as S}from"../../../chunks/index-e16f133d.js";function B(f,s,i){const p=f.slice();return p[10]=s[i],p[12]=i,p}function C(f){let s,i,p,a,c,_,n,l,e;function h(){return f[2](f[10])}function r(){return f[3](f[10])}return{c(){s=v("div"),i=v("img"),a=q(),c=v("img"),n=q(),this.h()},l(u){s=y(u,"DIV",{class:!0});var t=b(s);i=y(t,"IMG",{class:!0,src:!0,alt:!0}),a=w(t),c=y(t,"IMG",{class:!0,src:!0,alt:!0}),n=w(t),t.forEach(g),this.h()},h(){m(i,"class","front svelte-t8yqds"),E(i.src,p=f[10].img)||m(i,"src",p),m(i,"alt",""),m(c,"class","back svelte-t8yqds"),E(c.src,_="front.webp")||m(c,"src",_),m(c,"alt",""),m(s,"class","card svelte-t8yqds"),T(s,"flipped",f[10].flipped)},m(u,t){M(u,s,t),k(s,i),k(s,a),k(s,c),k(s,n),l||(e=[N(s,"click",h),N(s,"keypress",r)],l=!0)},p(u,t){f=u,t&1&&!E(i.src,p=f[10].img)&&m(i,"src",p),t&1&&T(s,"flipped",f[10].flipped)},d(u){u&&g(s),l=!1,S(e)}}}function V(f){let s,i,p,a,c,_,n=f[0],l=[];for(let e=0;e<n.length;e+=1)l[e]=C(B(f,n,e));return{c(){s=v("head"),i=v("title"),p=P("Memory thing"),a=q(),c=v("main"),_=v("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){s=y(e,"HEAD",{});var h=b(s);i=y(h,"TITLE",{});var r=b(i);p=Q(r,"Memory thing"),r.forEach(g),h.forEach(g),a=w(e),c=y(e,"MAIN",{class:!0});var u=b(c);_=y(u,"DIV",{class:!0});var t=b(_);for(let o=0;o<l.length;o+=1)l[o].l(t);t.forEach(g),u.forEach(g),this.h()},h(){m(_,"class","row svelte-t8yqds"),m(c,"class","svelte-t8yqds")},m(e,h){M(e,s,h),k(s,i),k(i,p),M(e,a,h),M(e,c,h),k(c,_);for(let r=0;r<l.length;r+=1)l[r].m(_,null)},p(e,[h]){if(h&3){n=e[0];let r;for(r=0;r<n.length;r+=1){const u=B(e,n,r);l[r]?l[r].p(u,h):(l[r]=C(u),l[r].c(),l[r].m(_,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:I,o:I,d(e){e&&g(s),e&&g(a),e&&g(c),R(l,e)}}}function H(f,s,i){let p=["pieceset/bB.svg","pieceset/bQ.svg","pieceset/bK.svg","pieceset/bN.svg","pieceset/bP.svg","pieceset/bR.svg","pieceset/wB.svg","pieceset/wQ.svg","pieceset/wK.svg","pieceset/wN.svg","pieceset/wP.svg","pieceset/wR.svg"],a=[];function c(t,o){let d=Math.floor(Math.random()*o.length),D=o[d];i(0,a[D]={id:t,img:p[t],flipped:!1,completed:!1},a),o.splice(d,1)}function _(){i(0,a=[]);let t=[];for(let o=0;o<16;o++)a.push(-1),t.push(o);for(let o=0;o<8;o++){let d=Math.floor(Math.random()*p.length);c(d,t),c(d,t)}}_();let n=0,l=-1,e=!1;function h(t){if(e)return;!t.flipped&&n<2&&(t.flipped=!0,n+=1,n==2&&(l&&l.id==t.id?(n=0,t.completed=!0,l.completed=!0):(e=!0,setTimeout(()=>{a.forEach(d=>{d.flipped=d.completed}),i(0,a),e=!1},1e3)),n=0),l=t,i(0,a));let o=0;for(let d=0;d<16;d++)a[d].completed&&(o+=1);o==16&&(n=0,l=-1,e=!0,setTimeout(()=>{a.forEach(d=>{d.completed=!1,d.flipped=!1}),i(0,a)},1e3),setTimeout(()=>{_(),e=!1},2e3))}return[a,h,t=>{h(t)},t=>{h(t)}]}class L extends G{constructor(s){super(),K(this,s,H,V,A,{})}}export{L as default};
