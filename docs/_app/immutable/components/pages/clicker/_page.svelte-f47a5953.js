import{S as ke,i as Ne,s as qe,k as K,a as le,q as Ae,l as J,m as oe,h as C,c as ie,r as Te,n as w,M as Re,N as Ue,b as k,G as Q,u as ze,B as Fe,o as He}from"../../../chunks/index-d063f04b.js";var Ve=1e-6;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function Oe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ye(e,r,_){var f=_[0],c=_[1],p=_[2],g,b,P,U,m,t,A,h,x,I,s,T;return r===e?(e[12]=r[0]*f+r[4]*c+r[8]*p+r[12],e[13]=r[1]*f+r[5]*c+r[9]*p+r[13],e[14]=r[2]*f+r[6]*c+r[10]*p+r[14],e[15]=r[3]*f+r[7]*c+r[11]*p+r[15]):(g=r[0],b=r[1],P=r[2],U=r[3],m=r[4],t=r[5],A=r[6],h=r[7],x=r[8],I=r[9],s=r[10],T=r[11],e[0]=g,e[1]=b,e[2]=P,e[3]=U,e[4]=m,e[5]=t,e[6]=A,e[7]=h,e[8]=x,e[9]=I,e[10]=s,e[11]=T,e[12]=g*f+m*c+x*p+r[12],e[13]=b*f+t*c+I*p+r[13],e[14]=P*f+A*c+s*p+r[14],e[15]=U*f+h*c+T*p+r[15]),e}function We(e,r,_){var f=_[0],c=_[1],p=_[2];return e[0]=r[0]*f,e[1]=r[1]*f,e[2]=r[2]*f,e[3]=r[3]*f,e[4]=r[4]*c,e[5]=r[5]*c,e[6]=r[6]*c,e[7]=r[7]*c,e[8]=r[8]*p,e[9]=r[9]*p,e[10]=r[10]*p,e[11]=r[11]*p,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Ke(e,r,_){var f=Math.sin(_),c=Math.cos(_),p=r[0],g=r[1],b=r[2],P=r[3],U=r[8],m=r[9],t=r[10],A=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=p*c-U*f,e[1]=g*c-m*f,e[2]=b*c-t*f,e[3]=P*c-A*f,e[8]=p*f+U*c,e[9]=g*f+m*c,e[10]=b*f+t*c,e[11]=P*f+A*c,e}function Je(e,r,_,f,c){var p=1/Math.tan(r/2),g;return e[0]=p/_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,c!=null&&c!==1/0?(g=1/(f-c),e[10]=(c+f)*g,e[14]=2*c*f*g):(e[10]=-1,e[14]=-2*f),e}var Qe=Je;function Ze(e,r,_,f){var c,p,g,b,P,U,m,t,A,h,x=r[0],I=r[1],s=r[2],T=f[0],V=f[1],a=f[2],L=_[0],j=_[1],X=_[2];return Math.abs(x-L)<Ve&&Math.abs(I-j)<Ve&&Math.abs(s-X)<Ve?Oe(e):(m=x-L,t=I-j,A=s-X,h=1/Math.hypot(m,t,A),m*=h,t*=h,A*=h,c=V*A-a*t,p=a*m-T*A,g=T*t-V*m,h=Math.hypot(c,p,g),h?(h=1/h,c*=h,p*=h,g*=h):(c=0,p=0,g=0),b=t*g-A*p,P=A*c-m*g,U=m*p-t*c,h=Math.hypot(b,P,U),h?(h=1/h,b*=h,P*=h,U*=h):(b=0,P=0,U=0),e[0]=c,e[1]=b,e[2]=m,e[3]=0,e[4]=p,e[5]=P,e[6]=t,e[7]=0,e[8]=g,e[9]=U,e[10]=A,e[11]=0,e[12]=-(c*x+p*I+g*s),e[13]=-(b*x+P*I+U*s),e[14]=-(m*x+t*I+A*s),e[15]=1,e)}function Ie(e,r,_,f){var c=r[0],p=r[1],g=r[2],b=f[0],P=f[1],U=f[2],m=c-_[0],t=p-_[1],A=g-_[2],h=m*m+t*t+A*A;h>0&&(h=1/Math.sqrt(h),m*=h,t*=h,A*=h);var x=P*A-U*t,I=U*m-b*A,s=b*t-P*m;return h=x*x+I*I+s*s,h>0&&(h=1/Math.sqrt(h),x*=h,I*=h,s*=h),e[0]=x,e[1]=I,e[2]=s,e[3]=0,e[4]=t*s-A*I,e[5]=A*x-m*s,e[6]=m*I-t*x,e[7]=0,e[8]=m,e[9]=t,e[10]=A,e[11]=0,e[12]=c,e[13]=p,e[14]=g,e[15]=1,e}function $e(e){let r,_,f,c,p,g,b,P,U,m,t,A,h,x,I,s,T,V,a,L,j,X,de,te,se,ue,ne,ae,me,he,O,fe;return{c(){r=K("canvas"),_=le(),f=K("title"),c=Ae("real engin"),p=le(),g=K("div"),b=le(),P=K("div"),U=le(),m=K("h1"),t=Ae("LINUS CLICKER"),h=le(),x=K("h2"),I=Ae(e[2]),T=le(),V=K("div"),a=K("img"),j=le(),X=K("img"),te=le(),se=K("h2"),ue=Ae("YES"),ne=le(),ae=K("h2"),me=Ae(e[3]),he=le(),O=K("img"),this.h()},l(n){r=J(n,"CANVAS",{id:!0,class:!0}),oe(r).forEach(C),_=ie(n),f=J(n,"TITLE",{});var M=oe(f);c=Te(M,"real engin"),M.forEach(C),p=ie(n),g=J(n,"DIV",{id:!0,class:!0});var Be=oe(g);Be.forEach(C),b=ie(n),P=J(n,"DIV",{id:!0,class:!0});var Me=oe(P);Me.forEach(C),U=ie(n),m=J(n,"H1",{id:!0,class:!0});var ye=oe(m);t=Te(ye,"LINUS CLICKER"),ye.forEach(C),h=ie(n),x=J(n,"H2",{id:!0,class:!0});var xe=oe(x);I=Te(xe,e[2]),xe.forEach(C),T=ie(n),V=J(n,"DIV",{id:!0});var Z=oe(V);a=J(Z,"IMG",{src:!0,id:!0,class:!0}),j=ie(Z),X=J(Z,"IMG",{src:!0,id:!0,class:!0}),te=ie(Z),se=J(Z,"H2",{id:!0,class:!0});var _e=oe(se);ue=Te(_e,"YES"),_e.forEach(C),ne=ie(Z),ae=J(Z,"H2",{id:!0,class:!0});var v=oe(ae);me=Te(v,e[3]),v.forEach(C),Z.forEach(C),he=ie(n),O=J(n,"IMG",{src:!0,id:!0,style:!0,class:!0}),this.h()},h(){w(r,"id","webglCanvas"),w(r,"class","svelte-1v7bzey"),w(g,"id","crosshairLine1"),w(g,"class","crosshair svelte-1v7bzey"),w(P,"id","crosshairLine2"),w(P,"class","crosshair svelte-1v7bzey"),w(m,"id","header"),w(m,"class",A=Re(e[0])+" svelte-1v7bzey"),w(x,"id","score"),w(x,"class",s=Re(e[1])+" svelte-1v7bzey"),Ue(a.src,L="doomthing.png")||w(a,"src",L),w(a,"id","bar"),w(a,"class","svelte-1v7bzey"),Ue(X.src,de=e[5])||w(X,"src",de),w(X,"id","joe"),w(X,"class","svelte-1v7bzey"),w(se,"id","ammotext"),w(se,"class","svelte-1v7bzey"),w(ae,"id","healthtext"),w(ae,"class","svelte-1v7bzey"),w(V,"id","barcontainer"),Ue(O.src,fe="texture.png")||w(O,"src",fe),w(O,"id","jumpscare"),w(O,"style",e[4]),w(O,"class","svelte-1v7bzey")},m(n,M){k(n,r,M),k(n,_,M),k(n,f,M),Q(f,c),k(n,p,M),k(n,g,M),k(n,b,M),k(n,P,M),k(n,U,M),k(n,m,M),Q(m,t),k(n,h,M),k(n,x,M),Q(x,I),k(n,T,M),k(n,V,M),Q(V,a),Q(V,j),Q(V,X),Q(V,te),Q(V,se),Q(se,ue),Q(V,ne),Q(V,ae),Q(ae,me),k(n,he,M),k(n,O,M)},p(n,M){M[0]&1&&A!==(A=Re(n[0])+" svelte-1v7bzey")&&w(m,"class",A),M[0]&4&&ze(I,n[2]),M[0]&2&&s!==(s=Re(n[1])+" svelte-1v7bzey")&&w(x,"class",s),M[0]&32&&!Ue(X.src,de=n[5])&&w(X,"src",de),M[0]&8&&ze(me,n[3]),M[0]&16&&w(O,"style",n[4])},i:Fe,o:Fe,d(n){n&&C(r),n&&C(_),n&&C(f),n&&C(p),n&&C(g),n&&C(b),n&&C(P),n&&C(U),n&&C(m),n&&C(h),n&&C(x),n&&C(T),n&&C(V),n&&C(he),n&&C(O)}}}function H(e){let r=parseFloat(e.str.slice(e.i));for(;e.i<e.length;)switch(e.str[e.i]){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"-":e.i++;break;default:return r}return r}function ce(e){for(;e.i<e.length&&(e.str[e.i]==" "||e.str[e.i]=="	");)e.i++}function Se(e){for(;e.i<e.length&&e.str[e.i++]!=`
`;);}function et(e){e!==document.pointerLockElement&&e.requestPointerLock()}function De(e){let r=1/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]*r,e[1]*r,e[2]*r]}function je(e,r){return[e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]}function ee(e,r){return!(Math.abs(e[0]-r[0])>e[3]+r[3]||Math.abs(e[1]-r[1])>e[4]+r[4]||Math.abs(e[2]-r[2])>e[5]+r[5])}function tt(e,r,_){let f="",c="",p="score: 0",g=0,b=3,P="opacity: 0",U="joe.jpg",m,t,A=`#version 300 es
layout(location = 0) in vec3 inPosition;
layout(location = 1) in vec2 inUV;

uniform mat4 inModelMatrix;
uniform mat4 inViewMatrix;
uniform mat4 inProjectionMatrix;

out vec2 UV;


void main()
{
	gl_Position = inProjectionMatrix * inViewMatrix * inModelMatrix * vec4(inPosition, 1);
	UV = inUV.xy;
}
	`,h=`#version 300 es
precision lowp float;

in vec2 UV;

uniform sampler2D albedo;

uniform float enableGreenscreen;

out vec4 outColor;

void main()
{
	//outColor = texture(albedo, vec2(gl_FragCoord.x/1920.0, gl_FragCoord.y/1080.0));
	vec4 color = texture(albedo, vec2(UV.x, UV.y));

#define threshold 0.55
#define padding 0.05
	if (enableGreenscreen > 0.5) {
		vec4 greenScreen = vec4(0, 1, 0, 1);
		vec3 diff = color.xyz - greenScreen.xyz;
		float fac = smoothstep(threshold-padding, threshold+padding, dot(diff,diff));
		color = mix(color, vec4(0, 0, 0, 1), 1.0-fac);
		if (fac < 0.1) {
			discard;
		}
	}
	
	outColor = color;
}
	`,x=0,I=270,s=[0,0,5],T=[0,0,-1],V={},a=[],L=[],j=[];function X(v,B){let o=t.createShader(v);if(t.shaderSource(o,B),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;console.log("epic fail #2"),console.log(t.getShaderInfoLog(o))}function de(v,B){let o=t.createProgram();if(t.attachShader(o,v),t.attachShader(o,B),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS))return o;console.log("epic fail #3"),console.log(t.getProgramInfoLog(o))}function te(v,B){let o={},E,y=new XMLHttpRequest;y.open("GET","assetstore/"+v+"/meta.txt",!1),y.send(),y.status!=200&&console.log("???"),E=y.responseText;let d=E.substring(9).split(`
`)[0],l,F=new XMLHttpRequest;F.open("GET","assetstore/"+v+"/"+d,!1),F.send(),F.status!=200&&console.log("???"),l=F.responseText;let $=[],D=[],z=[],i={str:l,length:l.length,i:0};for(;i.i<i.length;)if(i.str[i.i]=="v"&&i.str[i.i+1]=="t"){i.i+=2,ce(i);let S=H(i);ce(i);let G=-H(i);z.push([S,G])}else if(i.str[i.i]=="v"&&i.str[i.i+1]=="p")Se(i);else if(i.str[i.i]=="v"&&i.str[i.i+1]=="n")Se(i);else if(i.str[i.i]=="v"){i.i++,ce(i);let S=H(i);ce(i);let G=H(i);ce(i);let u=H(i);$.push([S,G,u])}else if(i.str[i.i]=="f"){i.i++,ce(i);let S=H(i);i.i++;let G=H(i);i.i++,H(i),ce(i);let u=H(i);i.i++;let Pe=H(i);i.i++,H(i),ce(i);let Ge=H(i);i.i++;let Xe=H(i);i.i++,H(i),ce(i),Se(i),D.push([S-1,G-1]),D.push([u-1,Pe-1]),D.push([Ge-1,Xe-1])}else Se(i);let R=[];for(let S=0;S<D.length;S++){let G=D[S][0];R.push($[G][0]),R.push($[G][1]),R.push($[G][2]);let u=D[S][1];R.push(z[u][0]),R.push(z[u][1])}let N=t.createVertexArray();t.bindVertexArray(N);let Y=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,Y),t.bufferData(t.ARRAY_BUFFER,new Float32Array(R),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,5*4,0),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,2,t.FLOAT,!1,5*4,3*4);const W=t.createTexture();t.bindTexture(t.TEXTURE_2D,W);const re=0,q=t.RGBA,ve=1,pe=1,we=0,Ee=t.RGBA,be=t.UNSIGNED_BYTE,Ce=new Uint8Array([0,0,255,255]);t.texImage2D(t.TEXTURE_2D,re,q,ve,pe,we,Ee,be,Ce);let ge=E.split(`
`)[1].split(" ")[0],Le=E.split(`
`)[1].split(" ")[1];if(o.textureType=ge,ge=="image"){const S=new Image;S.onload=()=>{t.bindTexture(t.TEXTURE_2D,W),t.texImage2D(t.TEXTURE_2D,re,q,Ee,be,S)},S.src="assetstore/"+v+"/"+Le}else if(ge=="video"){let Pe=function(){G&&u&&(o.needsVideoUpdate==!1&&(o.destroyTime=window.performance.now()+S.duration*1e3),o.needsVideoUpdate=!0)};const S=document.createElement("video");let G=!1,u=!1;S.playsInline=!0,S.muted=!1,S.loop=!1,S.addEventListener("playing",()=>{G=!0,Pe()},!0),S.addEventListener("timeupdate",()=>{u=!0,Pe()},!0),S.src="assetstore/"+v+"/"+Le,S.play(),B.destroyAfterVideoEnd===!0&&(o.destroyTime=window.performance.now()+1e6),o.needsVideoUpdate=!1,o.video=S}return o.enableGreenscreen=E.split(`
`)[2].split(" ")[1].replace(/\W/g,"")=="true",o.enableLazycull=E.split(`
`)[3].split(" ")[1].replace(/\W/g,"")=="true",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),o.vao=N,o.texture=W,o.triangleCount=D.length,o.buffer=Y,o}function se(v){const o=t.RGBA,E=t.RGBA,y=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,v.texture),t.texImage2D(t.TEXTURE_2D,0,o,E,y,v.video)}function ue(v){(v.textureType="video")&&v.video.remove(),t.deleteBuffer(v.buffer),t.deleteTexture(v.texture),t.deleteVertexArray(v.vao)}function ne(v){v.enableGreenscreen&&t.uniform1f(_e,1),v.enableLazycull?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),t.uniformMatrix4fv(Me,!1,new Float32Array(v.matrix)),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,v.texture),t.uniform1i(Z,0),t.bindVertexArray(v.vao),t.drawArrays(t.TRIANGLES,0,v.triangleCount)}function ae(){if(!fe)return;let v=.5,B=[s[0]+v*T[0],s[1]+v*T[1],s[2]+v*T[2]];a.push([...B,...T])}function me(v,B){let o=8*B,E=100*100,y=[],d=[];for(let l=0;l<a.length;l++){if(a[l][0]+=a[l][3]*o,a[l][1]+=a[l][4]*o,a[l][2]+=a[l][5]*o,a[l][0]*a[l][0]+a[l][1]*a[l][1]+a[l][2]*a[l][2]>E){y.push(l);continue}let $=[a[l][0],a[l][1],a[l][2],.1,.1,.1];if(ee($,[0,-5,0,50,3,50])){let z=[];z.length=16;let i=.5;Ie(z,[a[l][0],a[l][1]+i,a[l][2]],[a[l][0]+a[l][3],a[l][1]+a[l][4]+i,a[l][2]+a[l][5]],[0,1,0]);let R=7,N="miss"+Math.floor(Math.random()*R),Y=te(N,{destroyAfterVideoEnd:!0});Y.matrix=z,j.push(Y),y.push(l);continue}for(let z=0;z<L.length;z++){let i=[...L[z],1,1,1];if(ee($,i)){let R=[];R.length=16,Ie(R,[a[l][0],a[l][1],a[l][2]],[a[l][0]+a[l][3],a[l][1]+a[l][4],a[l][2]+a[l][5]],[0,1,0]);let N=2,Y="hit"+Math.floor(Math.random()*N),W=te(Y,{destroyAfterVideoEnd:!0});W.matrix=R,j.push(W),y.push(l),d.push(z),g+=1}}}for(let l=0;l<y.length;l++)a.splice(y[l],1);for(let l=0;l<d.length;l++)L.splice(d[l],1)}function he(v){let B=[0,-5,0,50,3,50];const o=[0,1,0];let E=2*v,y=De([T[0],0,T[2]]);Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2]);let d=je(o,y);if(V.KeyW){let l=[s[0]+y[0]*E,s[1]+y[1]*E,s[2]+y[2]*E],F=[l[0],l[1],l[2],1,1,1];ee(F,B)||(s=[...l])}if(V.KeyS){let l=[s[0]-y[0]*E,s[1]-y[1]*E,s[2]-y[2]*E],F=[l[0],l[1],l[2],1,1,1];ee(F,B)||(s=[...l])}if(V.KeyA){let l=[s[0]+d[0]*E,s[1]+d[1]*E,s[2]+d[2]*E],F=[l[0],l[1],l[2],1,1,1];ee(F,B)||(s=[...l])}if(V.KeyD){let l=[s[0]-d[0]*E,s[1]-d[1]*E,s[2]-d[2]*E],F=[l[0],l[1],l[2],1,1,1];ee(F,B)||(s=[...l])}{let l=[s[0],s[1]-o[1]*E,s[2]],F=[l[0],l[1],l[2],1,1,1];ee(F,B)||(s=[...l])}}function O(v){let B=[0,-5,0,50,3,50];const o=[0,1,0];let E=[],y=n/2*v;for(let d=0;d<L.length;d++){let l=De([s[0]-L[d][0],0,s[2]-L[d][2]]);l[0]*=y,l[1]*=y,l[2]*=y;{let D=[L[d][0],L[d][1]-o[1]*y,L[d][2]],z=[D[0],D[1],D[2],1,1,1];ee(z,B)||(L[d]=[...D])}{let D=[L[d][0]+l[0],L[d][1]+l[1],L[d][2]+l[2]],z=[D[0],D[1],D[2],1,1,1];ee(z,B)||(L[d]=[...D])}let F=[...L[d],1,1,1],$=[...s,1,1,1];ee($,F)&&(new Audio("A.mp3").play(),_(3,b-=1),E.push(d))}for(let d=0;d<E.length;d++)L.splice(E[d],1)}let fe=!1,n=0,M=!1;function Be(){M==!1&&fe==!0&&L.length==0&&(M=!0,setTimeout(()=>{n+=1;let v=2*n;for(let B=0;B<v;B++){let o=[0,0,0];for(;;){o[0]=30*(1-2*Math.random()),o[1]=8*Math.random(),o[2]=30*(1-2*Math.random());let E=o[0]-s[0],y=o[1]-s[1],d=o[2]-s[2];if(Math.sqrt(E*E+y*y+d*d)>4)break}L.push(o)}M=!1},1e3))}let Me,ye,xe,Z,_e;return He(()=>{addEventListener("keydown",R=>{V[R.code]=!0}),addEventListener("keyup",R=>{V[R.code]=!1}),addEventListener("click",R=>{et(m)}),addEventListener("mousedown",R=>{ae()}),addEventListener("mousemove",R=>{if(m!==document.pointerLockElement)return;let N=R.movementX,Y=-R.movementY,W=.022,re=3,q=N*re*W,ve=Y*re*W;I+=q,x+=ve,x>89?x=89:x<-89&&(x=-89),T[0]=Math.cos(I*Math.PI/180)*Math.cos(x*Math.PI/180),T[1]=Math.sin(x*Math.PI/180),T[2]=Math.sin(I*Math.PI/180)*Math.cos(x*Math.PI/180)}),m=document.getElementById("webglCanvas"),t=m.getContext("webgl2"),t||console.log("epic fail #1");let v=X(t.VERTEX_SHADER,A),B=X(t.FRAGMENT_SHADER,h),o=de(v,B);Me=t.getUniformLocation(o,"inModelMatrix"),ye=t.getUniformLocation(o,"inViewMatrix"),xe=t.getUniformLocation(o,"inProjectionMatrix"),Z=t.getUniformLocation(o,"albedo"),_e=t.getUniformLocation(o,"enableGreenscreen");let E=te("defaultcube"),y=te("floor"),d=te("M4A4"),l=te("bullet");y.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,-2,0,1],d.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l.matrix=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let F=.1,$=1e3;t.enable(t.CULL_FACE),t.cullFace(t.BACK),t.depthMask(!0),t.clearColor(0,0,0,1),t.clearDepth(0),t.depthFunc(t.LESS),t.enable(t.DEPTH_TEST);let D=!0,z;function i(R){b>2?_(5,U="joe.jpg"):b==2?_(5,U="joe4.jpg"):b==1?_(5,U="moment.jpg"):b==0&&_(4,P=""),_(2,p="score: "+g+`
wave: `+n),D&&(D=!1,z=R);let N=(R-z)/1e3;z=R;let Y=.3;N>Y&&(N=Y);let W=[];for(let u=0;u<j.length;u++)j[u].destroyTime>window.performance.now()?(W.push(j[u]),j[u].needsVideoUpdate&&se(j[u])):ue(j[u]);j=[...W];const re=[0,1,0];he(N),O(N),Be(),me(R,N);let q=De([T[0],0,T[2]]);Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]);let ve=je(re,q),pe=[s[0]-.4*ve[0]+.6*q[0],s[1]-.1,s[2]-.4*ve[2]+.6*q[2]];Ie(d.matrix,pe,[pe[0]-T[0],pe[1]-T[1],pe[2]-T[2]],re),m.width=document.documentElement.clientWidth,m.height=document.documentElement.clientHeight,t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_COLOR_BIT);let we=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ee=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],be=[s[0]+T[0],s[1]+T[1],s[2]+T[2]];Ze(we,s,be,re);let Ce=74*Math.PI/180,ge=m.width/m.height;Qe(Ee,Ce,ge,F,$),t.useProgram(o),t.uniformMatrix4fv(ye,!1,new Float32Array(we)),t.uniformMatrix4fv(xe,!1,new Float32Array(Ee));for(let u=0;u<L.length;u++)E.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,L[u][0],L[u][1],L[u][2],1],ne(E);ne(y);let Le=[s[0],s[1],s[2],1,1,1];ee(Le,[0,0,0,1,1,1])&&(_(0,f="headerAnimationClass"),_(1,c="scoreAnimationClass"),fe=!0),fe==!1&&(d.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ye(d.matrix,d.matrix,[0,-1.2,0]),Ke(d.matrix,d.matrix,R/1e3));let G=.2;We(d.matrix,d.matrix,[G,G,G]),ne(d);for(let u=0;u<a.length;u++)Ie(l.matrix,[a[u][0],a[u][1],a[u][2]],[a[u][0]-a[u][3],a[u][1]-a[u][4],a[u][2]-a[u][5]],re),ne(l);for(let u=0;u<j.length;u++)ne(j[u]);window.requestAnimationFrame(i)}window.requestAnimationFrame(i)}),[f,c,p,b,P,U]}class lt extends ke{constructor(r){super(),Ne(this,r,tt,$e,qe,{},null,[-1,-1])}}export{lt as default};
